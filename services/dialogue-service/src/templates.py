"""
Dialogue Templates
Pre-written dialogue templates for fast generation
"""
import random
from typing import Dict, List, Optional


def get_dialogue_templates() -> Dict[tuple, List[str]]:
    """
    Comprehensive dialogue template library
    Format: {(event_type, emotion, persona): [dialogue options]}
    """
    return {
        # ===== COMBAT EVENTS =====

        # Victory - Cheerful persona
        ("player.victory", "happy", "cheerful"): [
            "Â§™Ê£í‰∫ÜÔºÅ‰Ω†Ëµ¢‰∫ÜÔºÅ‚ú®",
            "ÂìáÔºÅËøôÂ±ÄÊâìÂæóÁúüÊºÇ‰∫ÆÔºÅ",
            "ËÉúÂà©ÔºÅÂπ≤ÂæóÊºÇ‰∫ÆÔºÅüéâ",
            "Ëµ¢Âï¶Ëµ¢Âï¶ÔºÅÂÆûÂú®Â§™ÂéâÂÆ≥‰∫ÜÔºÅ",
            "ÂÆåÁæéÔºÅËøôÂ∞±ÊòØ‰Ω†ÁöÑÂÆûÂäõÔºÅ"
        ],
        ("player.victory", "excited", "cheerful"): [
            "Â§™Âº∫‰∫ÜÔºÅÔºÅÔºÅÂÆåÂÖ®Á¢æÂéãÔºÅ",
            "ÂìáÂ°ûÔºÅËøôÊìç‰ΩúÁÆÄÁõ¥Áªù‰∫ÜÔºÅ",
            "Êó†ÊïåÔºÅÔºÅÁúüÁöÑÊó†ÊïåÔºÅ",
            "ÁñØÁãÇËæìÂá∫ÔºÅÁúüÊòØÂ§™Á≤æÂΩ©‰∫ÜÔºÅ"
        ],

        # Victory - Cool persona
        ("player.victory", "happy", "cool"): [
            "‰∏çÈîôÔºåËµ¢‰∫Ü„ÄÇ",
            "È¢ÑÊñô‰πã‰∏≠ÁöÑÁªìÊûú„ÄÇ",
            "ËøôÂú∫ËÉúÂà©ÂÆûËá≥ÂêçÂΩí„ÄÇ",
            "Âπ≤ÂæóÂ•Ω„ÄÇ"
        ],
        ("player.victory", "excited", "cool"): [
            "Âá∫Ëâ≤ÁöÑË°®Áé∞„ÄÇ",
            "ÂÆåÁæéÁöÑÊàòÊúØÊâßË°å„ÄÇ",
            "Á¢æÂéãÊÄßÁöÑËÉúÂà©„ÄÇ"
        ],

        # Victory - Cute persona
        ("player.victory", "happy", "cute"): [
            "Ëµ¢Âï¶~ ‰Ω†Â•ΩÂéâÂÆ≥ÂëÄÔºÅüíï",
            "Âìá~ Â•ΩÂºÄÂøÉÔºÅÊàë‰ª¨Ëµ¢‰∫ÜÔºÅ",
            "Â§™Ê£íÂï¶~ ‰Ω†ÊòØÊúÄÂº∫ÁöÑÔºÅ",
            "ÂëúÂìá~ Â•ΩÊøÄÂä®ÔºÅËµ¢Âï¶ÔºÅ"
        ],
        ("player.victory", "excited", "cute"): [
            "ÂìáÂìáÂìáÔºÅÔºÅÂ§™ÂéâÂÆ≥‰∫ÜÔºÅÔºÅ",
            "Â•ΩÂº∫Âïä~ ÂÆåÂÖ®ÂéãÂà∂‰∫ÜÂØπÊâãÔºÅ",
            "ÂëúÂìá~ Ëøô‰πüÂ§™Â∏Ö‰∫ÜÂêßÔºÅ"
        ],

        # Defeat - Cheerful persona
        ("player.defeat", "sad", "cheerful"): [
            "Ê≤°ÂÖ≥Á≥ªÔºå‰∏ã‰∏ÄÂ±Ä‰∏ÄÂÆöÂèØ‰ª•ÁöÑÔºÅ",
            "Âà´ÁÅ∞ÂøÉÔºåËÉúË¥•‰πÉÂÖµÂÆ∂Â∏∏‰∫ã~",
            "‰ºëÊÅØ‰∏Ä‰∏ãÂêßÔºå‰∏ãÊääÊõ¥ÂéâÂÆ≥ÔºÅ",
            "ËøôÊ¨°ËøêÊ∞î‰∏çÂ•ΩÔºå‰∏ãÊ¨°ËÇØÂÆöËÉΩËµ¢ÔºÅ",
            "Â§±Ë¥•ÊòØÊàêÂäü‰πãÊØçÔºåÂä†Ê≤πÔºÅ"
        ],
        ("player.defeat", "disappointed", "cheerful"): [
            "ËôΩÁÑ∂Ëæì‰∫ÜÔºå‰ΩÜ‰Ω†Â∑≤ÁªèÂæàÂä™Âäõ‰∫ÜÔºÅ",
            "Âà´Â§±ÊúõÔºå‰∏ãÊ¨°Êàë‰ª¨‰ºöÊõ¥Âº∫ÁöÑÔºÅ",
            "ËøôÊ¨°ÁªèÈ™å‰ºöËÆ©Êàë‰ª¨ÂèòÂæóÊõ¥Âº∫ÔºÅ"
        ],

        # Defeat - Cool persona
        ("player.defeat", "sad", "cool"): [
            "Ëæì‰∫Ü„ÄÇÂàÜÊûê‰∏Ä‰∏ãÂ§±ËØØ„ÄÇ",
            "ËøôÂú∫‰∏çË°å„ÄÇÊÄªÁªìÁªèÈ™å„ÄÇ",
            "Â§±Ë¥•‰∫Ü„ÄÇ‰∏ãÊ¨°ÊîπËøõ„ÄÇ",
            "Â∑ÆË∑ùËøòÂú®„ÄÇÁªßÁª≠Âä™Âäõ„ÄÇ"
        ],
        ("player.defeat", "disappointed", "cool"): [
            "Ë°®Áé∞‰∏ç‰Ω≥„ÄÇÈúÄË¶ÅÂèçÊÄù„ÄÇ",
            "ËæìÂæó‰∏çÂÜ§„ÄÇÂØπÊâãÊõ¥Âº∫„ÄÇ",
            "ËøòÊúâÊèêÂçáÁ©∫Èó¥„ÄÇ"
        ],

        # Defeat - Cute persona
        ("player.defeat", "sad", "cute"): [
            "Âëú... Ê≤°ÂÖ≥Á≥ªÁöÑÂï¶~ ‰∏ãÊ¨°ÂÜçÂä†Ê≤πÔºÅ",
            "Ëæì‰∫Ü... ‰ΩÜÊòØ‰Ω†Â∑≤ÁªèÂæàÊ£í‰∫ÜÔºÅ",
            "Âà´ÈöæËøá~ Êàë‰ºö‰∏ÄÁõ¥Èô™ÁùÄ‰Ω†ÁöÑÔºÅ",
            "ÂëúÂëú~ ‰∏ãÊ¨°‰∏ÄÂÆöËÉΩËµ¢ÁöÑÔºÅ"
        ],
        ("player.defeat", "disappointed", "cute"): [
            "ËôΩÁÑ∂Ëæì‰∫Ü... ‰ΩÜ‰Ω†ÁúüÁöÑÂæàÂä™Âäõ‰∫Ü~",
            "Âà´Â§±ÊúõÂï¶~ Êàë‰ª¨‰ºöÂèòÂæóÊõ¥Âº∫ÁöÑÔºÅ",
            "Ê≤°ÂÖ≥Á≥ªÁöÑ~ Â§±Ë¥•‰πüÊòØÊàêÈïøÂì¶~"
        ],

        # Kill events (all personas)
        ("player.kill", "satisfied", "cheerful"): [
            "ÊºÇ‰∫ÆÁöÑÂáªÊùÄÔºÅ",
            "NiceÔºÅ",
            "Âπ≤ÂæóÂ•ΩÔºÅ",
            "ÂÆåÁæéÔºÅ"
        ],
        ("player.kill", "excited", "cheerful"): [
            "Â§™Â∏Ö‰∫ÜÔºÅ",
            "ÂìáÔºÅÔºÅÁ≤æÂΩ©ÁöÑÂáªÊùÄÔºÅ",
            "Ë∂ÖÁ•û‰∫ÜÔºÅÔºÅ",
            "ËøôÊìç‰ΩúÁªù‰∫ÜÔºÅ"
        ],
        ("player.kill", "amazed", "cheerful"): [
            "Â§©ÂïäÔºÅÔºÅÔºÅËøôÊòØ‰ªÄ‰πàÁ•û‰ªôÊìç‰ΩúÔºÅÔºÅ",
            "‰∏çÂèØÊÄùËÆÆÔºÅÔºÅ‰º†Â•áÂáªÊùÄÔºÅÔºÅ",
            "Â§™ÁñØÁãÇ‰∫ÜÔºÅÔºÅÔºÅ"
        ],

        ("player.kill", "satisfied", "cool"): [
            "Âπ≤Êéâ‰∫Ü„ÄÇ",
            "ÂáªÊùÄ„ÄÇ",
            "Ëß£ÂÜ≥‰∫Ü‰∏Ä‰∏™„ÄÇ",
            "‰∏çÈîô„ÄÇ"
        ],
        ("player.kill", "excited", "cool"): [
            "Á≤æÂáÜÂáªÊùÄ„ÄÇ",
            "Âá∫Ëâ≤ÁöÑÊìç‰Ωú„ÄÇ",
            "ÂÆåÁæéÁöÑtiming„ÄÇ"
        ],
        ("player.kill", "amazed", "cool"): [
            "...ÊÉä‰∫∫ÁöÑÊìç‰Ωú„ÄÇ",
            "‰º†Â•áÁ∫ßÁöÑÂáªÊùÄ„ÄÇ",
            "Èöæ‰ª•ÁΩÆ‰ø°ÁöÑË°®Áé∞„ÄÇ"
        ],

        ("player.kill", "satisfied", "cute"): [
            "ÊâìÂÄíÂï¶~ Â•ΩÂéâÂÆ≥ÔºÅ",
            "Ëµ¢‰∫Ü~ ‰Ω†Â•ΩÂº∫Âì¶ÔºÅ",
            "ÊàêÂäüÂï¶~ÔºÅ"
        ],
        ("player.kill", "excited", "cute"): [
            "ÂìáÂìáÔºÅÂ•ΩÂ∏ÖÁöÑÂáªÊùÄÔºÅ",
            "Â§™Âº∫‰∫Ü~ ÊàëÈÉΩÁúãÂëÜ‰∫ÜÔºÅ",
            "ÂëúÂìá~ Ëøô‰πüÂ§™ÈÖ∑‰∫ÜÔºÅ"
        ],
        ("player.kill", "amazed", "cute"): [
            "ÂìáÂïäÂïäÔºÅÔºÅÊÄé‰πàÂÅöÂà∞ÁöÑÔºÅÔºÅ",
            "Â§™‰∏çÂèØÊÄùËÆÆ‰∫ÜÔºÅÔºÅ‰º†Â•áÔºÅÔºÅ",
            "ÊàëÁöÑÂ§©ÔºÅÔºÅ‰Ω†ÊòØÁ•ûÂêóÔºÅÔºÅ"
        ],

        # Death events (all personas)
        ("player.death", "disappointed", "cheerful"): [
            "ÂìéÂëÄÔºå‰∏çÂ∞èÂøÉË¢´ÂáªË¥•‰∫Ü",
            "Â§±ËØØ‰∫ÜÔºå‰∏ãÊ¨°Ê≥®ÊÑèÔºÅ",
            "Ë¢´ÊâìË¥•‰∫ÜÔºåÂ∞èÂøÉÁÇπÔºÅ"
        ],
        ("player.death", "frustrated", "cheerful"): [
            "Âà´Ê∞îÈ¶ÅÔºÅ",
            "Âä†Ê≤πÔºÅ‰∏ãÊ¨°Â∞èÂøÉÔºÅ",
            "ÊåØ‰ΩúËµ∑Êù•ÔºÅ",
            "‰∏çË¶ÅÊîæÂºÉÔºÅ"
        ],

        ("player.death", "disappointed", "cool"): [
            "Â§±ËØØ‰∫Ü„ÄÇ",
            "Â§ßÊÑè‰∫Ü„ÄÇ",
            "Ë¢´ÂáªË¥•‰∫Ü„ÄÇ"
        ],
        ("player.death", "frustrated", "cool"): [
            "ÂÜ∑Èùô„ÄÇË∞ÉÊï¥ÂøÉÊÄÅ„ÄÇ",
            "Âà´ÊÄ•„ÄÇÁ®≥‰Ωè„ÄÇ",
            "‰øùÊåÅÂÜ∑Èùô„ÄÇ"
        ],

        ("player.death", "disappointed", "cute"): [
            "Âëú~ Ë¢´ÊâìË¥•‰∫Ü...",
            "ÂëÄ... Â§±ËØØ‰∫ÜÂë¢...",
            "Âïä... ‰∏çÂ∞èÂøÉ‰∫Ü..."
        ],
        ("player.death", "frustrated", "cute"): [
            "Âà´ÁîüÊ∞îÂòõ~ ‰∏ãÊ¨°‰ºöÊõ¥Â∞èÂøÉÁöÑÔºÅ",
            "ÂëúÂëú~ Âà´ÁÅ∞ÂøÉÂï¶ÔºÅ",
            "Ê≤°ÂÖ≥Á≥ªÁöÑ~ ÊàëÁõ∏‰ø°‰Ω†ÔºÅ"
        ],

        # Achievement events
        ("player.achievement", "happy", "cheerful"): [
            "ÊÅ≠ÂñúÔºÅËß£ÈîÅÊñ∞ÊàêÂ∞±ÔºÅ",
            "Â§™Ê£í‰∫ÜÔºÅËææÊàêÊàêÂ∞±ÔºÅ",
            "ÊàêÂ∞±getÔºÅ‚ú®"
        ],
        ("player.achievement", "excited", "cheerful"): [
            "ÂìáÔºÅÁ®ÄÊúâÊàêÂ∞±ÔºÅÂ§™ÂéâÂÆ≥‰∫ÜÔºÅ",
            "Âè≤ËØóÊàêÂ∞±ÔºÅ‰∏çÂèØÊÄùËÆÆÔºÅ"
        ],
        ("player.achievement", "amazed", "cheerful"): [
            "Â§©ÂïäÔºÅ‰º†Â•áÊàêÂ∞±ÔºÅÔºÅÔºÅ",
            "ËøôÊàêÂ∞±... ÁÆÄÁõ¥‰∏çÂèØËÉΩÂÆåÊàêÔºÅ",
            "‰º†Â•áÔºÅ‰Ω†ÂàõÈÄ†‰∫ÜÂéÜÂè≤ÔºÅÔºÅ"
        ],

        ("player.achievement", "happy", "cool"): [
            "ÊàêÂ∞±Ëß£ÈîÅ„ÄÇ",
            "‰∏çÈîôÁöÑÊàêÂ∞±„ÄÇ",
            "ËææÊàê‰∫Ü„ÄÇ"
        ],
        ("player.achievement", "excited", "cool"): [
            "Á®ÄÊúâÊàêÂ∞±„ÄÇÂÅöÂæóÂ•Ω„ÄÇ",
            "Âè≤ËØóÁ∫ßÊàêÂ∞±„ÄÇ‰ª§‰∫∫Âç∞Ë±°Ê∑±Âàª„ÄÇ"
        ],
        ("player.achievement", "amazed", "cool"): [
            "...‰º†Â•áÊàêÂ∞±„ÄÇ‰ª§‰∫∫Êï¨Áïè„ÄÇ",
            "Ëøô‰∏™ÊàêÂ∞±... ÈùûÂá°„ÄÇ"
        ],

        ("player.achievement", "happy", "cute"): [
            "Âìá~ Êñ∞ÊàêÂ∞±ÔºÅ‰Ω†Â•ΩÊ£íÔºÅ",
            "ÊàêÂ∞±Ëß£ÈîÅÂï¶~ Â•ΩÂéâÂÆ≥ÔºÅ",
            "Â§™Â•Ω‰∫Ü~ Âèà‰∏Ä‰∏™ÊàêÂ∞±ÔºÅ"
        ],
        ("player.achievement", "excited", "cute"): [
            "ÂìáÂìáÔºÅÂ•ΩÁ®ÄÊúâÁöÑÊàêÂ∞±ÔºÅ",
            "ÂëúÂìá~ Âè≤ËØóÊàêÂ∞±ËÄ∂ÔºÅ"
        ],
        ("player.achievement", "amazed", "cute"): [
            "ÂëúÂìáÂïäÂïäÔºÅÔºÅ‰º†Â•áÊàêÂ∞±ÔºÅÔºÅ",
            "‰∏çÊï¢Áõ∏‰ø°ÔºÅÔºÅËøô‰πüÂ§™ÂéâÂÆ≥‰∫ÜÔºÅÔºÅ"
        ],

        # Level up events
        ("player.levelup", "happy", "cheerful"): [
            "ÂçáÁ∫ßÂï¶ÔºÅË∂äÊù•Ë∂äÂº∫‰∫ÜÔºÅ",
            "ÊÅ≠ÂñúÂçáÁ∫ßÔºÅ",
            "Level upÔºÅÂÆûÂäõÊèêÂçáÔºÅ"
        ],
        ("player.levelup", "proud", "cheerful"): [
            "ÂìáÔºÅËææÂà∞Êñ∞ÁöÑÈ´òÂ∫¶‰∫ÜÔºÅ",
            "Ëøô‰∏™Á≠âÁ∫ßÂèØ‰∏çÁÆÄÂçïÔºÅ",
            "‰∫Ü‰∏çËµ∑ÁöÑÈáåÁ®ãÁ¢ëÔºÅ"
        ],

        ("player.levelup", "happy", "cool"): [
            "ÂçáÁ∫ß‰∫Ü„ÄÇ",
            "Á≠âÁ∫ßÊèêÂçá„ÄÇ",
            "‰∏çÈîôÁöÑËøõÊ≠•„ÄÇ"
        ],
        ("player.levelup", "proud", "cool"): [
            "ÈáçË¶ÅÁöÑÈáåÁ®ãÁ¢ë„ÄÇ",
            "ÂÆûÂäõÊòæËëóÊèêÂçá„ÄÇ",
            "ËææÂà∞‰∫ÜÊñ∞ÁöÑÂ±ÇÊ¨°„ÄÇ"
        ],

        ("player.levelup", "happy", "cute"): [
            "ÂçáÁ∫ßÂï¶~ Â•ΩÂéâÂÆ≥Âì¶ÔºÅ",
            "Âìá~ ÂèàÂèòÂº∫‰∫ÜÂë¢ÔºÅ",
            "Level up~ ÁúüÊ£íÔºÅ"
        ],
        ("player.levelup", "proud", "cute"): [
            "ÂëúÂìá~ Ëøô‰∏™Á≠âÁ∫ßÂ•ΩÈ´òÔºÅ",
            "Â§™ÂéâÂÆ≥‰∫Ü~ ÊàëÂ•ΩÂ¥áÊãú‰Ω†ÔºÅ",
            "Â•ΩÂº∫Âïä~ ÁªßÁª≠Âä†Ê≤πÔºÅ"
        ],

        # Social events
        ("player.teamvictory", "happy", "cheerful"): [
            "Âõ¢ÈòüËÉúÂà©ÔºÅÂ§ßÂÆ∂ÈÉΩÂ•ΩÊ£íÔºÅ",
            "ÈÖçÂêàÂÆåÁæéÔºÅÂõ¢ÈòüÁöÑÂäõÈáèÔºÅ",
            "Ëµ¢‰∫ÜÔºÅÂõ¢ÈòüÂêà‰ΩúÁúüÊ£íÔºÅ"
        ],

        ("player.revived", "grateful", "cheerful"): [
            "ÂæóÊïë‰∫ÜÔºÅÈòüÂèãÂ§™ÁªôÂäõ‰∫ÜÔºÅ",
            "Ë∞¢Ë∞¢ÈòüÂèãÔºÅÁúüÊòØÂÖ≥ÈîÆÊó∂ÂàªÔºÅ",
            "Â§çÊ¥ª‰∫ÜÔºÅÂ•ΩÈô©Â•ΩÈô©ÔºÅ"
        ],

        ("player.savedally", "proud", "cheerful"): [
            "ÊïëÊè¥ÊàêÂäüÔºÅÁúüÊòØÂèäÊó∂ÔºÅ",
            "ÈòüÂèãÂæóÊïë‰∫ÜÔºÅÂÆåÁæéÔºÅ",
            "ÂÖ≥ÈîÆÁöÑÊîØÊè¥ÔºÅ"
        ],

        ("player.betrayed", "angry", "cheerful"): [
            "Ëøô... ÊÄé‰πà‰ºöËøôÊ†∑Ôºü",
            "Ë¢´ÈòüÂèãËÉåÂèõ‰∫Ü...",
            "ËøôÊòØ‰ªÄ‰πàÊÉÖÂÜµ..."
        ],

        # Loot events
        ("player.lootlegendary", "excited", "cheerful"): [
            "‰º†Â•áË£ÖÂ§áÔºÅÔºÅÔºÅÂ§™Âπ∏Ëøê‰∫ÜÔºÅÔºÅ",
            "ÂìáÔºÅÔºÅÈáëËâ≤ÂÖâËäíÔºÅÔºÅ‰º†Â•áÔºÅÔºÅ",
            "Â§©ÂïäÔºÅÔºÅÔºÅ‰º†Â•áÊéâËêΩÔºÅÔºÅ"
        ],

        ("player.lootepic", "happy", "cheerful"): [
            "Á¥´Ë£ÖÔºÅÂ•Ω‰∏úË•øÔºÅ",
            "Âè≤ËØóË£ÖÂ§áÔºÅËøêÊ∞î‰∏çÈîôÔºÅ",
            "ÂìáÔºÅÁ¥´Ëâ≤ÂìÅË¥®ÔºÅ"
        ],

        ("player.loot", "satisfied", "cheerful"): [
            "‰∏çÈîôÁöÑÊàòÂà©ÂìÅÔºÅ",
            "Êî∂Ëé∑‰∫Ü‰∫õÂ•Ω‰∏úË•øÔºÅ",
            "ÊàòÂà©ÂìÅgetÔºÅ"
        ],

        # Quest events
        ("player.questcomplete", "satisfied", "cheerful"): [
            "‰ªªÂä°ÂÆåÊàêÔºÅÂπ≤ÂæóÂ•ΩÔºÅ",
            "Quest clearÔºÅ",
            "ÂÆåÁæéÂÆåÊàê‰ªªÂä°ÔºÅ"
        ],

        ("player.questfailed", "disappointed", "cheerful"): [
            "‰ªªÂä°Â§±Ë¥•‰∫Ü... ‰∏ãÊ¨°ÂÜçÊù•ÔºÅ",
            "ÂèØÊÉú... Â∑Æ‰∏ÄÁÇπÂ∞±ÂÆåÊàê‰∫ÜÔºÅ",
            "Â§±Ë¥•‰∫Ü... ‰ΩÜÁªèÈ™åÂæàÂÆùË¥µÔºÅ"
        ],

        # Skill/Combo events
        ("player.skillcombo", "satisfied", "cheerful"): [
            "ËøûÊãõÊàêÂäüÔºÅ",
            "ComboÔºÅ",
            "ÊäÄËÉΩË°îÊé•ÂÆåÁæéÔºÅ"
        ],
        ("player.skillcombo", "excited", "cheerful"): [
            "Ë∂ÖÈïøËøûÊãõÔºÅÔºÅÊäÄÊúØÁÇ∏Ë£ÇÔºÅÔºÅ",
            "ËøôËøûÊãõ... Ë°å‰∫ëÊµÅÊ∞¥ÔºÅÔºÅ",
            "Amazing comboÔºÅÔºÅ"
        ],

        # Session events
        ("player.sessionstart", "cheerful", "cheerful"): [
            "ÂáÜÂ§áÂ•Ω‰∫ÜÂêóÔºüËÆ©Êàë‰ª¨ÂºÄÂßãÂêßÔºÅ",
            "Êñ∞ÁöÑÂÜíÈô©ÂºÄÂßãÂï¶ÔºÅ",
            "Âó®ÔºÅÂáÜÂ§áÂ•ΩÂ§ßÂπ≤‰∏ÄÂú∫‰∫ÜÂêóÔºü"
        ],

        ("player.sessionstart", "cheerful", "cool"): [
            "ÂºÄÂßã‰∫Ü„ÄÇ",
            "ÂáÜÂ§áÂ∞±Áª™„ÄÇ",
            "ËÆ©Êàë‰ª¨ÂºÄÂßãÂêß„ÄÇ"
        ],

        ("player.sessionstart", "cheerful", "cute"): [
            "ÂëÄ~ ÂºÄÂßãÂï¶ÔºÅ‰∏ÄËµ∑Âä†Ê≤πÂêßÔºÅ",
            "ÂáÜÂ§áÂ•Ω‰∫Ü~ Ë¶ÅÂºÄÂßãÂï¶ÔºÅ",
            "Âìá~ Êñ∞ÁöÑÂÜíÈô©~ Â•ΩÊúüÂæÖÔºÅ"
        ],

        ("player.sessionend", "neutral", "cheerful"): [
            "‰ªäÂ§©ËæõËã¶‰∫ÜÔºÅ",
            "‰ºëÊÅØ‰∏Ä‰∏ãÂêßÔºÅ",
            "‰∏çÈîôÁöÑ‰∏ÄÂ§©ÔºÅ"
        ],
        ("player.sessionend", "tired", "cheerful"): [
            "Êâì‰∫ÜÂ•Ω‰πÖÂë¢ÔºåÊ≥®ÊÑè‰ºëÊÅØÂì¶ÔºÅ",
            "ËØ•‰ºëÊÅØ‰∫ÜÔºåÊòéÂ§©ÂÜçÊàòÔºÅ",
            "Á¥Ø‰∫ÜÂêßÔºüÂ•ΩÂ•Ω‰ºëÊÅØÔºÅ"
        ],

        # Negative events
        ("player.timeout", "frustrated", "cheerful"): [
            "ÂìéÂëÄÔºåÁΩëÁªúÊñ≠‰∫Ü...",
            "ËøûÊé•Ë∂ÖÊó∂‰∫ÜÔºåÁúüÂÄíÈúâ...",
            "ÁΩëÁªúÂá∫ÈóÆÈ¢ò‰∫Ü..."
        ],

        ("player.outofresources", "worried", "cheerful"): [
            "ËµÑÊ∫ê‰∏çÂ§ü‰∫Ü... Ë¶ÅÂ∞èÂøÉÁÇπÔºÅ",
            "Ë°•ÁªôÂø´Áî®ÂÆå‰∫ÜÔºÅ",
            "ÂæóËµ∂Á¥ßË°•ÂÖÖËµÑÊ∫ê‰∫ÜÔºÅ"
        ],
    }


def get_emotion_fallbacks() -> Dict[tuple, List[str]]:
    """
    Fallback dialogues by emotion and persona
    Used when no specific event template is found
    """
    return {
        # Happy
        ("happy", "cheerful"): ["Â§™Â•Ω‰∫ÜÔºÅ", "ÁúüÊ£íÔºÅ", "ÂæàÂºÄÂøÉÔºÅ"],
        ("happy", "cool"): ["‰∏çÈîô„ÄÇ", "ÂæàÂ•Ω„ÄÇ", "ÂèØ‰ª•„ÄÇ"],
        ("happy", "cute"): ["Â•ΩÂºÄÂøÉ~ ", "Â§™Â•Ω‰∫Ü~", "ÁúüÊ£íÂëÄ~"],

        # Excited
        ("excited", "cheerful"): ["Â§™ÊøÄÂä®‰∫ÜÔºÅ", "ÂìáÔºÅ", "AmazingÔºÅ"],
        ("excited", "cool"): ["‰ª§‰∫∫ÊåØÂ•ã„ÄÇ", "Âá∫Ëâ≤„ÄÇ", "ÂæàÂ•Ω„ÄÇ"],
        ("excited", "cute"): ["ÂìáÂìá~ÔºÅ", "Â•ΩÊøÄÂä®~", "ÂëúÂìá~"],

        # Amazed
        ("amazed", "cheerful"): ["‰∏çÂèØÊÄùËÆÆÔºÅÔºÅ", "Â§©ÂïäÔºÅÔºÅ", "Â§™ÁñØÁãÇ‰∫ÜÔºÅÔºÅ"],
        ("amazed", "cool"): ["...‰ª§‰∫∫ÊÉäËÆ∂„ÄÇ", "Âá∫‰πéÊÑèÊñô„ÄÇ", "ÁΩïËßÅ„ÄÇ"],
        ("amazed", "cute"): ["ÂìáÂïäÂïäÔºÅÔºÅ", "‰∏çÊï¢Áõ∏‰ø°ÔºÅÔºÅ", "Â•ΩÂéâÂÆ≥ÂïäÔºÅÔºÅ"],

        # Sad
        ("sad", "cheerful"): ["Âà´ÈöæËøáÔºå‰ºöÂ•ΩËµ∑Êù•ÁöÑÔºÅ", "Âä†Ê≤πÔºÅ", "‰∏çË¶ÅÊîæÂºÉÔºÅ"],
        ("sad", "cool"): ["ÂÜ∑Èùô„ÄÇ", "‰øùÊåÅÁêÜÊô∫„ÄÇ", "Ë∞ÉÊï¥ÂøÉÊÄÅ„ÄÇ"],
        ("sad", "cute"): ["Âà´ÈöæËøáÂòõ~", "Ê≤°ÂÖ≥Á≥ªÁöÑ~", "Âëú..."],

        # Frustrated
        ("frustrated", "cheerful"): ["Âà´ÊÄ•ÔºåÊÖ¢ÊÖ¢Êù•ÔºÅ", "ÂÜ∑Èùô‰∏ãÊù•ÔºÅ", "Ê≤°‰∫ãÁöÑÔºÅ"],
        ("frustrated", "cool"): ["‰øùÊåÅÂÜ∑Èùô„ÄÇ", "ÊéßÂà∂ÊÉÖÁª™„ÄÇ", "Á®≥‰Ωè„ÄÇ"],
        ("frustrated", "cute"): ["Âà´ÁîüÊ∞îÂòõ~", "ÂÜ∑Èùô‰∏Ä‰∏ã~", "Ê∑±ÂëºÂê∏~"],

        # Disappointed
        ("disappointed", "cheerful"): ["Ê≤°ÂÖ≥Á≥ªÁöÑÔºÅ", "‰∏ãÊ¨°‰ºöÊõ¥Â•ΩÔºÅ", "Âà´ÁÅ∞ÂøÉÔºÅ"],
        ("disappointed", "cool"): ["Êé•ÂèóÁé∞ÂÆû„ÄÇ", "ÁªßÁª≠ÂâçËøõ„ÄÇ", "Ë∞ÉÊï¥Á≠ñÁï•„ÄÇ"],
        ("disappointed", "cute"): ["Âà´Â§±Êúõ~ ", "‰ºöÂ•ΩËµ∑Êù•ÁöÑ~", "ÊàëÁõ∏‰ø°‰Ω†~"],

        # Neutral
        ("neutral", "cheerful"): ["ÁªßÁª≠Âä†Ê≤πÔºÅ", "‰øùÊåÅÁä∂ÊÄÅÔºÅ", "Á®≥‰ΩèÔºÅ"],
        ("neutral", "cool"): ["ÁªßÁª≠„ÄÇ", "‰øùÊåÅ„ÄÇ", "Á®≥ÂÆö„ÄÇ"],
        ("neutral", "cute"): ["Âä†Ê≤π~", "ÁªßÁª≠Âì¶~", "‰∏ÄËµ∑Âä™Âäõ~"],

        # Satisfied
        ("satisfied", "cheerful"): ["ÂÅöÂæóÂ•ΩÔºÅ", "‰∏çÈîôÔºÅ", "ÂæàÊ£íÔºÅ"],
        ("satisfied", "cool"): ["ÂêàÊ†º„ÄÇ", "ÂèØ‰ª•„ÄÇ", "‰∏çÈîô„ÄÇ"],
        ("satisfied", "cute"): ["Â•ΩÊ£í~ ", "ÂæàÂ•ΩÂëÄ~", "ÁúüÂéâÂÆ≥~"],

        # Proud
        ("proud", "cheerful"): ["Áúü‰∫Ü‰∏çËµ∑ÔºÅ", "ÂÄºÂæóÈ™ÑÂÇ≤ÔºÅ", "Â§™Ê£í‰∫ÜÔºÅ"],
        ("proud", "cool"): ["ÂÄºÂæóËÆ§ÂèØ„ÄÇ", "Âá∫Ëâ≤ÁöÑË°®Áé∞„ÄÇ", "‰ª§‰∫∫Âç∞Ë±°Ê∑±Âàª„ÄÇ"],
        ("proud", "cute"): ["Â•ΩÂéâÂÆ≥Âïä~ ", "ÊàëÂ•ΩÂ¥áÊãú‰Ω†~", "Â§™Ê£í‰∫Ü~"],

        # Grateful
        ("grateful", "cheerful"): ["Ë∞¢Ë∞¢ÔºÅ", "Â§™ÊÑüË∞¢‰∫ÜÔºÅ", "ÁúüÊòØÂ∏ÆÂ§ßÂøô‰∫ÜÔºÅ"],
        ("grateful", "cool"): ["ÊÑüË∞¢„ÄÇ", "Ê¨†‰Ω†‰∏Ä‰∏™‰∫∫ÊÉÖ„ÄÇ", "Â§öË∞¢„ÄÇ"],
        ("grateful", "cute"): ["Ë∞¢Ë∞¢~ ", "Â•ΩÊÑüÊøÄ~", "ÁúüÊòØÂ§™Â•Ω‰∫Ü~"],

        # Angry
        ("angry", "cheerful"): ["ÂÜ∑Èùô‰∏Ä‰∏ãÔºÅ", "Âà´ÁîüÊ∞îÔºÅ", "Ê∑±ÂëºÂê∏ÔºÅ"],
        ("angry", "cool"): ["ÊéßÂà∂ÊÉÖÁª™„ÄÇ", "‰øùÊåÅÂÜ∑Èùô„ÄÇ", "ÁêÜÊô∫Ë°å‰∫ã„ÄÇ"],
        ("angry", "cute"): ["Âà´ÁîüÊ∞îÂòõ~", "ÂÜ∑ÈùôÂÜ∑Èùô~", "‰∏çË¶ÅÊøÄÂä®~"],

        # Worried
        ("worried", "cheerful"): ["Âà´ÊãÖÂøÉÔºÅ", "‰ºöÊ≤°‰∫ãÁöÑÔºÅ", "ÊîæÂøÉÔºÅ"],
        ("worried", "cool"): ["ÂàÜÊûêÊÉÖÂÜµ„ÄÇ", "Âà∂ÂÆöÂ∫îÂØπÊñπÊ°à„ÄÇ", "‰øùÊåÅË≠¶ÊÉï„ÄÇ"],
        ("worried", "cute"): ["Âà´ÊãÖÂøÉ~ ", "‰ºöÂ•ΩÁöÑ~", "ÊàëÈô™ÁùÄ‰Ω†~"],

        # Tired
        ("tired", "cheerful"): ["‰ºëÊÅØ‰∏Ä‰∏ãÂêßÔºÅ", "ËæõËã¶‰∫ÜÔºÅ", "ÊîæÊùæÊîæÊùæÔºÅ"],
        ("tired", "cool"): ["ËØ•‰ºëÊÅØ‰∫Ü„ÄÇ", "Ê≥®ÊÑèÂä≥ÈÄ∏ÁªìÂêà„ÄÇ", "‰øùÊåÅ‰ΩìÂäõ„ÄÇ"],
        ("tired", "cute"): ["Á¥Ø‰∫ÜÂêß~ ", "‰ºëÊÅØ‰∏Ä‰∏ã~", "ËæõËã¶Âï¶~"],
    }


def get_persona_fallbacks() -> Dict[str, str]:
    """Ultimate fallback by persona"""
    return {
        "cheerful": "ÁªßÁª≠Âä†Ê≤πÔºÅ‚ú®",
        "cool": "ÁªßÁª≠‰øùÊåÅ„ÄÇ",
        "cute": "‰∏ÄËµ∑Âä™ÂäõÂêß~"
    }


def select_template(event_type: str, emotion: str, persona: str) -> Optional[str]:
    """
    Select dialogue from templates with fallback mechanism

    Returns dialogue string or None if no template found
    """
    templates = get_dialogue_templates()

    # Tier 1: Exact match
    key = (event_type, emotion, persona)
    if key in templates:
        return random.choice(templates[key])

    # Tier 2: Event + Emotion match (any persona)
    for template_key in templates:
        if template_key[0] == event_type and template_key[1] == emotion:
            return random.choice(templates[template_key])

    # Tier 3: Emotion + Persona fallback
    emotion_fallbacks = get_emotion_fallbacks()
    fallback_key = (emotion, persona)
    if fallback_key in emotion_fallbacks:
        return random.choice(emotion_fallbacks[fallback_key])

    # Tier 4: Persona fallback
    persona_fallbacks = get_persona_fallbacks()
    return persona_fallbacks.get(persona, "Âä†Ê≤πÔºÅ")
